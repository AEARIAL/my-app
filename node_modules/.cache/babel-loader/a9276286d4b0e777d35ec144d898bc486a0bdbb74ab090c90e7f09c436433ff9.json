{"ast":null,"code":"import React,{useState,useEffect}from'react';import Papa from'papaparse';import QuantityPopup from'./QuantityPopup';import'./ProductList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductList=_ref=>{let{addToCart}=_ref;const[products,setProducts]=useState([]);const[selectedProduct,setSelectedProduct]=useState(null);const[loading,setLoading]=useState(true);// ローディング状態\n// CSVファイルを読み込み、商品の情報を取得\nuseEffect(()=>{const fetchData=async()=>{try{// 商品名のCSV読み込み\nconst itemNameResponse=await fetch('https://aearial.github.io/my-app/items/ItemName.csv');const itemNameText=await itemNameResponse.text();const itemNameData=Papa.parse(itemNameText,{header:false}).data;// 商品説明のCSV読み込み\nconst itemFlavResponse=await fetch('https://aearial.github.io/my-app/items/ItemFlav.csv');const itemFlavText=await itemFlavResponse.text();const itemFlavData=Papa.parse(itemFlavText,{header:false}).data;// 商品名と説明を統合して商品リストを作成\nconst parsedProducts=itemNameData.map((row,index)=>({id:index+1,name:row[1],// ITEMx_NAME\ndescription:itemFlavData[index]?itemFlavData[index][1]:'説明なし',// ITEMx_FLAV\nimage:`https://aearial.github.io/my-app/items/${index+1}.png`,// 商品画像のパス修正\nprice:3}));setProducts(parsedProducts);// 商品リストの設定\nsetLoading(false);// データ読み込み完了\n}catch(error){console.error(\"データの読み込みに失敗しました:\",error);setLoading(false);}};fetchData();// データを読み込む\n},[]);// コンポーネントがマウントされるときに実行\n// 商品リストの表示\nif(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u30C7\\u30FC\\u30BF\\u3092\\u8AAD\\u307F\\u8FBC\\u3093\\u3067\\u3044\\u307E\\u3059...\"});// ローディング中の表示\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"product-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5546\\u54C1\\u4E00\\u89A7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"product-grid\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,className:\"product-image\"}),/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),\"  \",/*#__PURE__*/_jsxs(\"p\",{children:[\"Cost:\",product.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedProduct(product),children:\"\\u9078\\u629E\"})]},product.id))}),selectedProduct&&/*#__PURE__*/_jsx(QuantityPopup,{product:selectedProduct,onClose:()=>setSelectedProduct(null),addToCart:addToCart// 親コンポーネントからのカート追加関数\n})]});};export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","Papa","QuantityPopup","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","addToCart","products","setProducts","selectedProduct","setSelectedProduct","loading","setLoading","fetchData","itemNameResponse","fetch","itemNameText","text","itemNameData","parse","header","data","itemFlavResponse","itemFlavText","itemFlavData","parsedProducts","map","row","index","id","name","description","image","price","error","console","children","className","product","src","alt","onClick","onClose"],"sources":["C:/Users/koki8/my-app/src/ProductList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Papa from 'papaparse';\r\nimport QuantityPopup from './QuantityPopup';\r\nimport './ProductList.css';\r\n\r\nconst ProductList = ({ addToCart }) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true); // ローディング状態\r\n\r\n  // CSVファイルを読み込み、商品の情報を取得\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // 商品名のCSV読み込み\r\n        const itemNameResponse = await fetch('https://aearial.github.io/my-app/items/ItemName.csv');\r\n        const itemNameText = await itemNameResponse.text();\r\n        const itemNameData = Papa.parse(itemNameText, { header: false }).data;\r\n\r\n        // 商品説明のCSV読み込み\r\n        const itemFlavResponse = await fetch('https://aearial.github.io/my-app/items/ItemFlav.csv');\r\n        const itemFlavText = await itemFlavResponse.text();\r\n        const itemFlavData = Papa.parse(itemFlavText, { header: false }).data;\r\n\r\n        // 商品名と説明を統合して商品リストを作成\r\n        const parsedProducts = itemNameData.map((row, index) => ({\r\n          id: index + 1,\r\n          name: row[1],  // ITEMx_NAME\r\n          description: itemFlavData[index] ? itemFlavData[index][1] : '説明なし',  // ITEMx_FLAV\r\n          image: `https://aearial.github.io/my-app/items/${index + 1}.png`,  // 商品画像のパス修正\r\n          price: 3,\r\n        }));\r\n\r\n        setProducts(parsedProducts);  // 商品リストの設定\r\n        setLoading(false); // データ読み込み完了\r\n      } catch (error) {\r\n        console.error(\"データの読み込みに失敗しました:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();  // データを読み込む\r\n  }, []);  // コンポーネントがマウントされるときに実行\r\n\r\n  // 商品リストの表示\r\n  if (loading) {\r\n    return <div>データを読み込んでいます...</div>;  // ローディング中の表示\r\n  }\r\n\r\n  return (\r\n    <div className=\"product-list\">\r\n      <h2>商品一覧</h2>\r\n      <div className=\"product-grid\">\r\n        {products.map((product) => (\r\n          <div key={product.id} className=\"product-item\">\r\n            <img src={product.image} alt={product.name} className=\"product-image\" />\r\n            <h3>{product.name}</h3>\r\n            <p>{product.description}</p>  {/* 商品説明の表示 */}\r\n            <p>Cost:{product.price}</p>\r\n            <button onClick={() => setSelectedProduct(product)}>選択</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {selectedProduct && (\r\n        <QuantityPopup\r\n          product={selectedProduct}\r\n          onClose={() => setSelectedProduct(null)}\r\n          addToCart={addToCart}  // 親コンポーネントからのカート追加関数\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}